<div>
    <app-navbar></app-navbar>

    <div class="btn-group">
        <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown" id="dropdownMenuButton"
            aria-haspopup="true" aria-expanded="false">
            Listar:
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton"
            onclick="javascript:console.log( $(event.target).data('mode'))">
            <a class="dropdown-item" data-mode="mode1" (click)="mostrarEstado(0)">Entrantes</a>
            <a class="dropdown-item" data-mode="mode3" (click)="mostrarEstado(1)">Aceptados</a>
            <a class="dropdown-item " data-mode="mode2" (click)="mostrarEstado(5)">Cancelados</a>
        </div>
    </div>

    <body class="card text-white bg-dark m-2 b-2" *ngFor="let pedido of Pedidos">
        <a *ngIf="(pedido.estado)===(mostrar)">
            <a *ngIf="asignarEstado(pedido)"></a>
            <tr>
                <a>Número de pedido: {{pedido.id}}</a>
            </tr>
            <tr>
                <a>Total: {{pedido.total}}</a>
            </tr>
            <tr>
                <a *ngFor="let detalle of pedido.detallePedido">
                    Detalles: {{detalle.articuloManofacturado.denominacion}}
                </a>
            </tr>
            <tr>
                <a>Estado: {{estado}}</a>
            </tr>
            <td *ngIf="(mostrar)===0">

                <button type="button" class="btn btn-success" (click)="cambiarEstado(pedido,1)">Aceptar</button>
                <button type="button" class="btn btn-danger" (click)="cambiarEstado(pedido,5)">Cancelar</button>

            </td>
            <td *ngIf="(mostrar)===1">

                <button type="button" class="btn btn-danger" (click)="cambiarEstado(pedido,5)">Cancelar Pedido</button>

            </td>
            <td *ngIf="(mostrar)===5">

                <button type="button" class="btn btn-success" (click)="cambiarEstado(pedido,0)">Devolver a pedidos
                    entrantes</button>

            </td>


            <td>
                <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1" *ngFor="let factura of Facturas">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalToggleLabel" style="color:#000000;font-size: 30px">Factura Número: {{factura.numero}}</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" style="color:#000000">
                         <h1 style="font-size: 17px">Forma de Pago: {{factura.formaPago}}</h1>
                          <h1 style="font-size: 17px">Número de Tarjeta: {{factura.nroTarjeta}}</h1>
                          <h1 style="font-size: 17px">Monto de Descuento: {{factura.montoDescuento}}</h1>
                          <h1 style="font-size: 17px; color: rgb(206, 71, 71);">Total venta: {{factura.totalVenta}}</h1>
                          <h1 style="font-size: 17px; color: rgb(206, 71, 71);">Total costo: {{factura.totalCosto}}</h1>
                          
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" data-bs-dismiss="modal">Ver Detalle</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1" *ngFor="let detalle of DetalleFacturas">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalToggleLabel2" style="color:#000000;font-size: 30px">Detalle</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" style="color:#000000">
                            <h1 style="font-size: 17px">Numero de detalle: {{detalle.id}}</h1>
                            <h1 style="font-size: 17px">Articulo: {{detalle.articuloManofacturado.denominacion}}</h1>
                            <h1 style="font-size: 17px">Cantidad: {{detalle.cantidad}}</h1>
                            <h1 style="font-size: 17px">Articulo Insumo: {{detalle.articuloInsumo.denominacion}}</h1>
                            <h1 style="font-size: 17px; color: rgb(206, 71, 71);">SubTotal: {{detalle.subTotal}}</h1>  
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-danger" data-bs-target="#exampleModalToggle" data-bs-toggle="modal" data-bs-dismiss="modal">Volver</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <a class="btn btn-primary" data-bs-toggle="modal" href="#exampleModalToggle" role="button" >Ver Factura</a>
            </td>



        </a>
    </body>

</div>